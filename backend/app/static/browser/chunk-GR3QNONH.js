import{a as B,d as ge,g as fe,h as ue,i as j,j as _e,k as ve}from"./chunk-KJ6Z22P3.js";import{a as ce,c as de,f as me,o as pe}from"./chunk-L4RQEMSP.js";import{$ as G,A as g,Ba as oe,Ca as re,Da as ae,Ea as se,Ga as y,H as R,J as l,Ka as le,L as v,M as x,N as I,R as b,Ta as C,U as f,W as Q,Y as n,Z as r,_ as m,a as W,aa as M,b as H,ba as u,ca as d,da as J,ea as K,f as T,fa as X,ga as Z,ha as s,ia as A,j as Y,ja as P,ka as ee,la as w,ma as S,na as F,pa as V,q as _,qa as $,sa as te,ta as ne,ua as ie,v as z,z as p}from"./chunk-7N4HMWCM.js";var D=class a{static \u0275fac=function(e){return new(e||a)};static \u0275cmp=x({type:a,selectors:[["app-play-list-header"]],decls:13,vars:0,consts:[[1,"play-list-header"],[1,"cover"],[1,"cover-mock"],[1,"uil","uil-heart"],[1,"content-text"],[1,"small-text"],[1,"title"],[1,"sub-title"],[1,"count-tracks"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),m(3,"i",3),r()(),n(4,"div",4)(5,"div",5),s(6,"Playlist"),r(),n(7,"h1",6),s(8,"Canciones que te gustan"),r(),n(9,"h5",7),s(10,"Brandon O\xF1a"),n(11,"span",8),s(12,"1000 canciones"),r()()()())},styles:[".play-list-header[_ngcontent-%COMP%]{display:flex;height:18rem;width:100%;padding-top:3rem;padding-bottom:1rem;background-color:#ffffff14;overflow-x:hidden;box-sizing:border-box}.content-text[_ngcontent-%COMP%]{padding:1.5rem 0;display:flex;flex-direction:column;justify-content:flex-end;overflow:hidden;min-width:0;flex:1}.cover[_ngcontent-%COMP%]{position:relative;width:17rem;padding:1rem 2rem;display:flex;justify-content:center;flex-shrink:0}.cover[_ngcontent-%COMP%]   .cover-mock[_ngcontent-%COMP%]{height:100%;width:18rem;display:flex;align-self:center;justify-content:center;align-items:center;font-size:5.5rem;background-color:var(--color-2);box-shadow:var(--shadow-1)}.content-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .content-text[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.content-text[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{font-weight:600}.content-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:6rem;letter-spacing:-7px}.content-text[_ngcontent-%COMP%]   .small-text[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:500}.content-text[_ngcontent-%COMP%]   .count-tracks[_ngcontent-%COMP%]{font-weight:300;opacity:.7;padding-left:.5rem}@media (max-width: 1024px){.play-list-header[_ngcontent-%COMP%]{height:16rem;padding-top:2.5rem}.cover[_ngcontent-%COMP%]{width:15rem}.cover[_ngcontent-%COMP%]   .cover-mock[_ngcontent-%COMP%]{width:16rem;font-size:5rem}.content-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:5rem;letter-spacing:-6px}}@media (max-width: 768px){.play-list-header[_ngcontent-%COMP%]{height:14rem;padding-top:2rem;flex-direction:column;align-items:center;text-align:center}.cover[_ngcontent-%COMP%]{width:12rem;padding:.5rem}.cover[_ngcontent-%COMP%]   .cover-mock[_ngcontent-%COMP%]{width:12rem;height:12rem;font-size:4rem}.content-text[_ngcontent-%COMP%]{padding:1rem 0;align-items:center}.content-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:3.5rem;letter-spacing:-4px}}@media (max-width: 480px){.play-list-header[_ngcontent-%COMP%]{height:12rem;padding:1rem;gap:1rem}.cover[_ngcontent-%COMP%]{width:8rem;padding:0}.cover[_ngcontent-%COMP%]   .cover-mock[_ngcontent-%COMP%]{width:8rem;height:8rem;font-size:3rem}.content-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2.5rem;letter-spacing:-2px;line-height:1.1}.content-text[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{font-size:.9rem}.content-text[_ngcontent-%COMP%]   .count-tracks[_ngcontent-%COMP%]{display:block;padding-left:0;margin-top:.25rem}}@media (max-width: 360px){.play-list-header[_ngcontent-%COMP%]{height:10rem;padding:.5rem}.cover[_ngcontent-%COMP%]{width:6rem}.cover[_ngcontent-%COMP%]   .cover-mock[_ngcontent-%COMP%]{width:6rem;height:6rem;font-size:2.5rem}.content-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2rem;letter-spacing:-1px}.content-text[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{font-size:.8rem}.content-text[_ngcontent-%COMP%]   .small-text[_ngcontent-%COMP%]{font-size:.7rem}}"]})};var O=class a{constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=x({type:a,selectors:[["app-favorites-page"]],decls:3,vars:0,consts:[[1,"favorites-page"]],template:function(e,i){e&1&&(n(0,"div",0),m(1,"app-play-list-header")(2,"app-play-list-body"),r())},dependencies:[y,C,D,_e],encapsulation:2})};var q=a=>({rotated:a}),ye=(a,t)=>({track:a,index:t}),be=(a,t)=>({"uil-play":a,"uil-pause":t});function Me(a,t){a&1&&(n(0,"div",7),m(1,"div",8),n(2,"p"),s(3,"\u{1F3B5} Cargando favoritos..."),r()())}function Pe(a,t){if(a&1){let e=M();n(0,"div",9),m(1,"i",10),n(2,"p"),s(3),r(),n(4,"button",11),u("click",function(){p(e);let o=d();return g(o.retryLoad())}),m(5,"i",12),s(6," Reintentar "),r()()}if(a&2){let e=d();l(3),A(e.error)}}function Oe(a,t){a&1&&(n(0,"div",13),m(1,"i",14),n(2,"h3"),s(3,"No tienes favoritos a\xFAn"),r(),n(4,"p"),s(5,"Las canciones que marques como favoritas aparecer\xE1n aqu\xED"),r()())}function ke(a,t){a&1&&G(0)}function we(a,t){if(a&1){let e=M();n(0,"ul",20),u("click",function(){let o=p(e).$implicit,c=d(2);return g(c.playTrack(o))}),n(1,"li",21),b(2,ke,1,0,"ng-container",22),r(),n(3,"li",23),s(4),r(),n(5,"li",24),s(6),r(),n(7,"li",25),s(8),r(),n(9,"li",26),u("click",function(o){return p(e),g(o.stopPropagation())}),n(10,"button",27),u("click",function(o){let c=p(e).$implicit,h=d(2);return g(h.startEdit(c,o))}),m(11,"i",28),r(),n(12,"button",29),u("click",function(o){let c=p(e).$implicit,h=d(2);return g(h.removeFavorite(c,o))}),m(13,"i",14),r(),n(14,"button",30),u("click",function(o){let c=p(e).$implicit,h=d(2);return g(h.deleteSong(c,o))}),m(15,"i",31),r()()()}if(a&2){let e=t.$implicit,i=t.index,o=d(2),c=Z(6);Q("current-track",o.isCurrentTrack(e))("editing",(o.editingTrack==null?null:o.editingTrack._id)===e._id),l(2),f("ngTemplateOutlet",c)("ngTemplateOutletContext",$(9,ye,e,i)),l(2),P(" ",e.album||"\xC1lbum desconocido"," "),l(2),P(" ",o.formatDate(e.created_at)," "),l(2),P(" ",o.formatDuration(e.duration)," ")}}function Se(a,t){if(a&1){let e=M();n(0,"div")(1,"ul",15)(2,"li",16),u("click",function(){p(e);let o=d();return g(o.changeSort("name"))}),n(3,"span"),s(4,"Nombre"),r(),m(5,"i",17),r(),n(6,"li",16),u("click",function(){p(e);let o=d();return g(o.changeSort("album"))}),n(7,"span"),s(8,"\xC1lbum"),r(),m(9,"i",17),r(),n(10,"li",16),u("click",function(){p(e);let o=d();return g(o.changeSort("created_at"))}),n(11,"span"),s(12,"Agregado"),r(),m(13,"i",17),r(),n(14,"li"),m(15,"i",18),r(),n(16,"li"),s(17,"Acciones"),r()(),b(18,we,16,12,"ul",19),te(19,"orderlist"),r()}if(a&2){let e=d();l(5),f("ngClass",V(8,q,e.optionSort.property==="name"&&e.optionSort.order==="desc")),l(4),f("ngClass",V(10,q,e.optionSort.property==="album"&&e.optionSort.order==="desc")),l(4),f("ngClass",V(12,q,e.optionSort.property==="created_at"&&e.optionSort.order==="desc")),l(5),f("ngForOf",ne(19,4,e.favoritesList,e.optionSort.property,e.optionSort.order))}}function Fe(a,t){if(a&1&&(n(0,"span",43),s(1),r()),a&2){let e=d().index;l(),A(e+1)}}function Ee(a,t){a&1&&m(0,"i",44)}function Le(a,t){if(a&1){let e=M();n(0,"div",32)(1,"div",33),b(2,Fe,2,1,"span",34)(3,Ee,1,0,"i",35),r(),n(4,"img",36),u("error",function(o){p(e);let c=d();return g(c.onImageError(o))}),r(),n(5,"div",37)(6,"div",38),s(7),r(),n(8,"div",39),s(9),r()(),n(10,"div",40)(11,"button",41),u("click",function(o){let c=p(e).track;return d().playTrack(c),g(o.stopPropagation())}),m(12,"i",42),r()()()}if(a&2){let e=t.track,i=d();l(2),f("ngIf",!i.isCurrentTrack(e)),l(),f("ngIf",i.isCurrentTrack(e)),l(),f("src",e.cover_url,R)("alt",e.name),l(3),P(" ",e.name," "),l(2),P(" ",e.artist||"Artista desconocido"," "),l(2),f("title",i.isCurrentTrack(e)?"Pausar":"Reproducir"),l(),f("ngClass",$(8,be,!i.isCurrentTrack(e),i.isCurrentTrack(e)))}}function Te(a,t){if(a&1){let e=M();n(0,"div",65)(1,"img",66),u("error",function(o){p(e);let c=d(2);return g(c.onImageErrorHide(o))}),r()()}if(a&2){let e=d(2);l(),f("src",e.editForm.cover_url,R)}}function ze(a,t){if(a&1){let e=M();n(0,"div",45),u("click",function(){p(e);let o=d();return g(o.cancelEdit())}),n(1,"div",46),u("click",function(o){return p(e),g(o.stopPropagation())}),n(2,"div",47)(3,"h3"),s(4,"Editar informaci\xF3n"),r(),n(5,"button",48),u("click",function(){p(e);let o=d();return g(o.cancelEdit())}),m(6,"i",49),r()(),n(7,"div",50)(8,"div",51)(9,"label",52),s(10,"T\xEDtulo"),r(),n(11,"input",53),F("ngModelChange",function(o){p(e);let c=d();return S(c.editForm.title,o)||(c.editForm.title=o),g(o)}),r()(),n(12,"div",51)(13,"label",54),s(14,"Artista"),r(),n(15,"input",55),F("ngModelChange",function(o){p(e);let c=d();return S(c.editForm.artist,o)||(c.editForm.artist=o),g(o)}),r()(),n(16,"div",51)(17,"label",56),s(18,"\xC1lbum"),r(),n(19,"input",57),F("ngModelChange",function(o){p(e);let c=d();return S(c.editForm.album,o)||(c.editForm.album=o),g(o)}),r()(),n(20,"div",51)(21,"label",58),s(22,"URL de la car\xE1tula"),r(),n(23,"input",59),F("ngModelChange",function(o){p(e);let c=d();return S(c.editForm.cover_url,o)||(c.editForm.cover_url=o),g(o)}),r()(),b(24,Te,2,1,"div",60),r(),n(25,"div",61)(26,"button",62),u("click",function(){p(e);let o=d();return g(o.cancelEdit())}),s(27," Cancelar "),r(),n(28,"button",63),u("click",function(){p(e);let o=d();return g(o.saveEdit())}),m(29,"i",64),s(30," Guardar cambios "),r()()()()}if(a&2){let e=d();l(11),w("ngModel",e.editForm.title),l(4),w("ngModel",e.editForm.artist),l(4),w("ngModel",e.editForm.album),l(4),w("ngModel",e.editForm.cover_url),l(),f("ngIf",e.editForm.cover_url),l(4),f("disabled",!(e.editForm.title!=null&&e.editForm.title.trim()))}}var L=class a{constructor(t,e,i,o,c){this.favoritesService=t;this.multimediaService=e;this.musicUploadService=i;this.tracksService=o;this.http=c}favoritesList=[];loading=!1;error=null;destroy$=new T;optionSort={property:null,order:"asc"};editingTrack=null;editForm={};currentTrack=null;ngOnInit(){console.log("\u{1F3B5} FavoritesListBodyComponent initialized"),this.loadFavorites(),this.multimediaService.currentTrack.pipe(_(this.destroy$)).subscribe(t=>{this.currentTrack=t}),this.favoritesService.getUserFavorites().pipe(_(this.destroy$)).subscribe(t=>{(this.favoritesList.length>0||t.length>0)&&(console.log("\u{1F504} Favorites changed, reloading list..."),this.loadFavorites())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadFavorites(){this.loading=!0,this.error=null,Y({favoriteIds:this.favoritesService.getUserFavorites(),allTracks:this.tracksService.getAllTracks()}).pipe(_(this.destroy$)).subscribe({next:({favoriteIds:t,allTracks:e})=>{console.log("\u2705 Favorite IDs:",t),console.log("\u2705 All tracks:",e.length),this.favoritesList=e.filter(i=>t.includes(Number(i._id))),console.log("\u2705 Favorites loaded:",this.favoritesList.length),this.loading=!1},error:t=>{console.error("\u274C Error loading favorites:",t),this.error="Error al cargar favoritos",this.loading=!1}})}playTrack(t){console.log("\u25B6\uFE0F Playing track:",t.name),this.multimediaService.setTrack(t)}isCurrentTrack(t){return this.currentTrack?._id===t._id}removeFavorite(t,e){e.stopPropagation(),confirm(`\xBFEst\xE1s seguro de que quieres quitar "${t.name}" de tus favoritos?`)&&(console.log("\u{1F494} Removing from favorites:",t.name),this.favoritesService.removeFromFavorites(Number(t._id)).pipe(_(this.destroy$)).subscribe({next:()=>{console.log("\u2705 Removed from favorites successfully"),this.favoritesList=this.favoritesList.filter(i=>i._id!==t._id)},error:i=>{console.error("\u274C Error removing favorite:",i),this.error="Error al quitar de favoritos"}}))}startEdit(t,e){e.stopPropagation(),console.log("\u270F\uFE0F Starting edit for:",t.name),this.editingTrack=t,this.editForm={title:t.name,artist:t.artist,album:t.album,cover_url:t.cover_url}}cancelEdit(){this.editingTrack=null,this.editForm={}}saveEdit(){this.editingTrack&&(console.log("\u{1F4BE} Saving metadata changes for:",this.editingTrack.name),this.updateSongMetadata(Number(this.editingTrack._id),{title:this.editForm.title,artist:this.editForm.artist,album:this.editForm.album,cover_url:this.editForm.cover_url}).pipe(_(this.destroy$)).subscribe({next:t=>{console.log("\u2705 Song metadata updated successfully:",t);let e=this.favoritesList.findIndex(i=>i._id===this.editingTrack._id);e!==-1&&(this.favoritesList[e]=H(W({},this.favoritesList[e]),{name:this.editForm.title,artist:this.editForm.artist,album:this.editForm.album,cover_url:this.editForm.cover_url})),this.cancelEdit()},error:t=>{console.error("\u274C Error updating song metadata:",t),this.error="Error al actualizar la informaci\xF3n de la canci\xF3n"}}))}updateSongMetadata(t,e){return this.http.put(`http://localhost:5000/api/music/songs/${t}/metadata`,e)}deleteSong(t,e){e.stopPropagation();let i=`\xBFEst\xE1s seguro de que quieres eliminar "${t.name}" permanentemente? Esta acci\xF3n no se puede deshacer.`;confirm(i)&&(console.log("\u{1F5D1}\uFE0F Deleting song:",t.name),this.musicUploadService.deleteSong(Number(t._id)).pipe(_(this.destroy$)).subscribe({next:o=>{console.log("\u2705 Song deleted successfully:",o),this.favoritesService.removeFromFavorites(Number(t._id)).pipe(_(this.destroy$)).subscribe({next:()=>{this.favoritesList=this.favoritesList.filter(c=>c._id!==t._id),console.log("\u2705 Song removed from favorites and deleted")},error:c=>{console.error("\u274C Error removing from favorites:",c),this.favoritesList=this.favoritesList.filter(h=>h._id!==t._id)}})},error:o=>{console.error("\u274C Error deleting song:",o),this.error="Error al eliminar la canci\xF3n"}}))}changeSort(t){let{order:e}=this.optionSort;this.optionSort={property:t,order:e==="asc"?"desc":"asc"},console.log("\u{1F504} Sort changed:",this.optionSort)}retryLoad(){console.log("\u{1F504} Retry loading favorites"),this.loadFavorites()}formatDuration(t){if(!t||isNaN(t))return"0:00";let e=Math.floor(t/60),i=Math.floor(t%60);return`${e}:${i.toString().padStart(2,"0")}`}formatDate(t){if(!t)return"Desconocida";try{let e=new Date(t);return isNaN(e.getTime())?"Fecha inv\xE1lida":e.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})}catch{return"Fecha inv\xE1lida"}}onImageError(t){let e=t.target;e.src="assets/img/default-cover.png"}onImageErrorHide(t){let e=t.target;e.style.display="none"}static \u0275fac=function(e){return new(e||a)(v(j),v(B),v(fe),v(ge),v(le))};static \u0275cmp=x({type:a,selectors:[["app-favorites-list-body"]],decls:8,vars:5,consts:[["coverSection",""],[1,"favorites-list-body"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","empty-state",4,"ngIf"],[4,"ngIf"],["class","edit-modal-overlay",3,"click",4,"ngIf"],[1,"loading-state"],[1,"loading-spinner"],[1,"error-state"],[1,"uil","uil-exclamation-triangle"],[1,"retry-btn",3,"click"],[1,"uil","uil-redo"],[1,"empty-state"],[1,"uil","uil-heart-break"],[1,"favorites-table-header"],[1,"sortable",3,"click"],[1,"uil","uil-angle-down",3,"ngClass"],[1,"uil","uil-clock-eight"],["class","favorites-rows",3,"current-track","editing","click",4,"ngFor","ngForOf"],[1,"favorites-rows",3,"click"],[1,"track-name"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"track-album"],[1,"track-date"],[1,"track-duration"],[1,"track-actions",3,"click"],["title","Editar informaci\xF3n",1,"action-btn","edit-btn",3,"click"],[1,"uil","uil-edit"],["title","Quitar de favoritos",1,"action-btn","remove-btn",3,"click"],["title","Eliminar canci\xF3n permanentemente",1,"action-btn","delete-btn",3,"click"],[1,"uil","uil-trash-alt"],[1,"cover-section"],[1,"track-number"],["class","number",4,"ngIf"],["class","uil uil-volume current-playing",4,"ngIf"],[1,"cover-track",3,"error","src","alt"],[1,"cover-info"],[1,"name-track"],[1,"name-track-details"],[1,"play-overlay"],[1,"play-btn",3,"click","title"],[1,"uil",3,"ngClass"],[1,"number"],[1,"uil","uil-volume","current-playing"],[1,"edit-modal-overlay",3,"click"],[1,"edit-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"uil","uil-times"],[1,"modal-body"],[1,"form-group"],["for","trackTitle"],["type","text","id","trackTitle","placeholder","Nombre de la canci\xF3n",3,"ngModelChange","ngModel"],["for","trackArtist"],["type","text","id","trackArtist","placeholder","Nombre del artista",3,"ngModelChange","ngModel"],["for","trackAlbum"],["type","text","id","trackAlbum","placeholder","Nombre del \xE1lbum",3,"ngModelChange","ngModel"],["for","trackCover"],["type","url","id","trackCover","placeholder","https://ejemplo.com/cover.jpg",3,"ngModelChange","ngModel"],["class","cover-preview",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"uil","uil-check"],[1,"cover-preview"],["alt","Preview",3,"error","src"]],template:function(e,i){e&1&&(n(0,"div",1),b(1,Me,4,0,"div",2)(2,Pe,7,1,"div",3)(3,Oe,6,0,"div",4)(4,Se,20,14,"div",5),r(),b(5,Le,13,11,"ng-template",null,0,ie)(7,ze,31,6,"div",6)),e&2&&(l(),f("ngIf",i.loading),l(),f("ngIf",i.error),l(),f("ngIf",!i.loading&&!i.error&&i.favoritesList.length===0),l(),f("ngIf",!i.loading&&!i.error&&i.favoritesList.length>0),l(3),f("ngIf",i.editingTrack))},dependencies:[y,oe,re,ae,se,pe,ce,de,me,ue],styles:[".favorites-list-body[_ngcontent-%COMP%]{padding:1rem;color:var(--color-primary)}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1rem;text-align:center}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--color-2);border-top:3px solid var(--color-4);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#ff6b6b;margin-bottom:1rem}.retry-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:var(--color-4);color:#fff;border:none;border-radius:25px;cursor:pointer;transition:all .3s ease;margin-top:1rem}.retry-btn[_ngcontent-%COMP%]:hover{background:var(--color-3);transform:translateY(-2px)}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:var(--color-2);margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.5rem;color:var(--color-primary)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-2);font-size:1rem}.favorites-table-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:4fr 2fr 2fr 1fr 1.5fr;gap:1rem;padding:1rem 1.5rem;border-bottom:1px solid var(--color-2);margin-bottom:1rem;list-style:none;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px;color:var(--color-2)}.favorites-table-header[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.sortable[_ngcontent-%COMP%]{cursor:pointer;transition:color .3s ease;-webkit-user-select:none;user-select:none}.sortable[_ngcontent-%COMP%]:hover{color:var(--color-4)}.sortable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.sortable[_ngcontent-%COMP%]   i.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.favorites-rows[_ngcontent-%COMP%]{display:grid;grid-template-columns:4fr 2fr 2fr 1fr 1.5fr;gap:1rem;padding:.75rem 1.5rem;list-style:none;border-radius:8px;cursor:pointer;transition:all .3s ease;margin-bottom:.5rem;position:relative}.favorites-rows[_ngcontent-%COMP%]:hover{background:var(--color-1);transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.favorites-rows.current-track[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-4),var(--color-3));color:#fff}.favorites-rows.current-track[_ngcontent-%COMP%]   .track-album[_ngcontent-%COMP%], .favorites-rows.current-track[_ngcontent-%COMP%]   .track-date[_ngcontent-%COMP%], .favorites-rows.current-track[_ngcontent-%COMP%]   .track-duration[_ngcontent-%COMP%]{color:#ffffffe6}.favorites-rows.editing[_ngcontent-%COMP%]{background:var(--color-1);border:2px solid var(--color-4)}.track-name[_ngcontent-%COMP%]{display:flex;align-items:center}.track-album[_ngcontent-%COMP%], .track-date[_ngcontent-%COMP%], .track-duration[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--color-2);font-size:.9rem}.cover-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;position:relative;width:100%}.track-number[_ngcontent-%COMP%]{width:20px;text-align:center;font-size:.9rem;color:var(--color-2)}.track-number[_ngcontent-%COMP%]   .current-playing[_ngcontent-%COMP%]{color:var(--color-4);animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.cover-track[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:6px;object-fit:cover;transition:transform .3s ease}.favorites-rows[_ngcontent-%COMP%]:hover   .cover-track[_ngcontent-%COMP%]{transform:scale(1.05)}.cover-info[_ngcontent-%COMP%]{flex:1;min-width:0}.name-track[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-primary);margin-bottom:.25rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.name-track-details[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.play-overlay[_ngcontent-%COMP%]{position:absolute;top:50%;left:70px;transform:translateY(-50%);opacity:0;transition:opacity .3s ease}.favorites-rows[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.play-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:var(--color-4);color:#fff;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;box-shadow:0 4px 12px #0003}.play-btn[_ngcontent-%COMP%]:hover{background:var(--color-3);transform:scale(1.1)}.play-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.track-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;opacity:0;transition:opacity .3s ease}.favorites-rows[_ngcontent-%COMP%]:hover   .track-actions[_ngcontent-%COMP%]{opacity:1}.action-btn[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;font-size:1rem}.edit-btn[_ngcontent-%COMP%]{background:var(--color-4);color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background:var(--color-3);transform:scale(1.1)}.remove-btn[_ngcontent-%COMP%]{background:#ff6b6b;color:#fff}.remove-btn[_ngcontent-%COMP%]:hover{background:#ff5252;transform:scale(1.1)}.delete-btn[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover{background:#b91c1c;transform:scale(1.1)}.edit-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.edit-modal[_ngcontent-%COMP%]{background:var(--color-1);border-radius:12px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_modalSlideIn .3s ease}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--color-2)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-primary);font-size:1.5rem}.close-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:var(--color-2);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;color:#fff}.close-btn[_ngcontent-%COMP%]:hover{background:#ff6b6b;transform:scale(1.1)}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:var(--color-primary);font-size:.9rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid var(--color-2);border-radius:8px;background:transparent;color:var(--color-primary);font-size:1rem;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-4)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--color-2)}.cover-preview[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.cover-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;max-height:150px;border-radius:8px;object-fit:cover;box-shadow:0 4px 12px #0000001a}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding:1.5rem;border-top:1px solid var(--color-2)}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;font-size:.9rem}.btn-secondary[_ngcontent-%COMP%]{background:var(--color-2);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#666}.btn-primary[_ngcontent-%COMP%]{background:var(--color-4);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--color-3)}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn[_ngcontent-%COMP%]:disabled:hover{background:var(--color-4);transform:none}@media (max-width: 768px){.favorites-table-header[_ngcontent-%COMP%], .favorites-rows[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr 1fr;gap:.5rem;padding:.75rem}.track-date[_ngcontent-%COMP%], .track-actions[_ngcontent-%COMP%]{display:none}.favorites-table-header[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3), .favorites-table-header[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){display:none}.cover-section[_ngcontent-%COMP%]{gap:.75rem}.cover-track[_ngcontent-%COMP%]{width:40px;height:40px}.play-overlay[_ngcontent-%COMP%]{left:50px}.play-btn[_ngcontent-%COMP%]{width:35px;height:35px}.edit-modal[_ngcontent-%COMP%]{width:95%;margin:1rem}.modal-header[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:1rem}.favorites-rows[_ngcontent-%COMP%]{position:relative}.favorites-rows[_ngcontent-%COMP%]   .track-actions[_ngcontent-%COMP%]{display:flex;position:absolute;right:.5rem;top:50%;transform:translateY(-50%);background:#000c;border-radius:20px;padding:.25rem;opacity:0;transition:opacity .3s ease}.favorites-rows[_ngcontent-%COMP%]:hover   .track-actions[_ngcontent-%COMP%], .favorites-rows[_ngcontent-%COMP%]:focus   .track-actions[_ngcontent-%COMP%]{opacity:1}.action-btn[_ngcontent-%COMP%]{width:30px;height:30px;font-size:.8rem}}@media (max-width: 480px){.favorites-table-header[_ngcontent-%COMP%], .favorites-rows[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem;padding:.5rem}.track-album[_ngcontent-%COMP%], .track-duration[_ngcontent-%COMP%]{display:none}.favorites-table-header[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2), .favorites-table-header[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){display:none}.track-actions[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:50%;transform:translateY(-50%);opacity:1;display:flex!important;background:#000000e6;border-radius:15px;padding:.2rem}.action-btn[_ngcontent-%COMP%]{width:28px;height:28px;font-size:.7rem;margin:0 1px}.cover-track[_ngcontent-%COMP%]{width:35px;height:35px}.name-track[_ngcontent-%COMP%]{font-size:.9rem}.name-track-details[_ngcontent-%COMP%]{font-size:.75rem}.play-overlay[_ngcontent-%COMP%]{left:45px}.play-btn[_ngcontent-%COMP%]{width:30px;height:30px}.play-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.edit-modal[_ngcontent-%COMP%]{width:98%;margin:.5rem;max-height:95vh}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.close-btn[_ngcontent-%COMP%]{width:35px;height:35px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.6rem;font-size:.9rem}.btn[_ngcontent-%COMP%]{padding:.6rem 1rem;font-size:.8rem}}"]})};var k=class a{constructor(t,e){this.favoritesService=t;this.multimediaService=e}favoritesListComponent;favoritesCount=0;destroy$=new T;ngOnInit(){console.log("\u{1F3B5} Liked Songs Page initialized"),this.loadFavoritesCount()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadFavoritesCount(){this.favoritesService.getUserFavorites().pipe(_(this.destroy$)).subscribe(t=>{this.favoritesCount=t.length,console.log("\u{1F522} Favorites count updated:",this.favoritesCount)})}playAll(){if(this.favoritesListComponent&&this.favoritesListComponent.favoritesList.length>0){let t=this.favoritesListComponent.favoritesList[0];console.log("\u25B6\uFE0F Playing all favorites, starting with:",t.name),this.multimediaService.setTrack(t)}}playShuffled(){if(this.favoritesListComponent&&this.favoritesListComponent.favoritesList.length>0){let t=[...this.favoritesListComponent.favoritesList],e=Math.floor(Math.random()*t.length),i=t[e];console.log("\u{1F500} Playing favorites shuffled, starting with:",i.name),this.multimediaService.setTrack(i)}}static \u0275fac=function(e){return new(e||a)(v(j),v(B))};static \u0275cmp=x({type:a,selectors:[["app-liked-songs-page"]],viewQuery:function(e,i){if(e&1&&J(L,5),e&2){let o;K(o=X())&&(i.favoritesListComponent=o.first)}},decls:29,vars:4,consts:[[1,"liked-songs-page"],[1,"liked-songs-header"],[1,"playlist-info"],[1,"playlist-cover"],[1,"liked-songs-icon"],[1,"uil","uil-heart"],[1,"playlist-details"],[1,"playlist-type"],[1,"playlist-title"],[1,"playlist-description"],[1,"playlist-stats"],[1,"user-name"],[1,"separator"],[1,"song-count"],[1,"playlist-actions"],[1,"play-all-btn",3,"click","disabled"],[1,"uil","uil-play"],["title","Reproducir en aleatorio",1,"shuffle-btn",3,"click","disabled"],[1,"uil","uil-shuffle"],["title","M\xE1s opciones",1,"more-options-btn"],[1,"uil","uil-ellipsis-h"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m(5,"i",5),r()(),n(6,"div",6)(7,"span",7),s(8,"Playlist"),r(),n(9,"h1",8),s(10,"Canciones que te gustan"),r(),n(11,"p",9),s(12," Tus canciones favoritas en un solo lugar "),r(),n(13,"div",10)(14,"span",11),s(15,"Tu m\xFAsica"),r(),n(16,"span",12),s(17,"\u2022"),r(),n(18,"span",13),s(19),r()()()(),n(20,"div",14)(21,"button",15),u("click",function(){return i.playAll()}),m(22,"i",16),s(23," Reproducir todo "),r(),n(24,"button",17),u("click",function(){return i.playShuffled()}),m(25,"i",18),r(),n(26,"button",19),m(27,"i",20),r()()(),m(28,"app-favorites-list-body"),r()),e&2&&(l(19),ee(" ",i.favoritesCount," canci\xF3n",i.favoritesCount!==1?"es":""," "),l(2),f("disabled",i.favoritesCount===0),l(3),f("disabled",i.favoritesCount===0))},dependencies:[y,C,L],styles:['.liked-songs-page[_ngcontent-%COMP%]{padding:0;color:var(--color-primary)}.liked-songs-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#3b82f6);padding:1.5rem;display:flex;align-items:flex-end;justify-content:space-between;min-height:280px;position:relative;overflow:hidden}.liked-songs-header[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#8b5cf6e6,#3b82f6cc);z-index:1}.playlist-info[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:2rem;z-index:2;position:relative}.playlist-cover[_ngcontent-%COMP%]{width:200px;height:200px;background:linear-gradient(135deg,#ec4899,#8b5cf6);border-radius:12px;display:flex;align-items:center;justify-content:center;box-shadow:0 20px 40px #0000004d;flex-shrink:0}.liked-songs-icon[_ngcontent-%COMP%]{font-size:4rem;color:#fff;text-shadow:0 4px 8px rgba(0,0,0,.3)}.playlist-details[_ngcontent-%COMP%]{color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.5)}.playlist-type[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;text-transform:uppercase;letter-spacing:1px;opacity:.9;margin-bottom:.5rem;display:block}.playlist-title[_ngcontent-%COMP%]{font-size:4rem;font-weight:900;margin:0 0 1rem;line-height:1.1;letter-spacing:-.02em}.playlist-description[_ngcontent-%COMP%]{font-size:1.1rem;margin:0 0 1rem;opacity:.9;line-height:1.4}.playlist-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.95rem;font-weight:500}.separator[_ngcontent-%COMP%]{opacity:.7}.user-name[_ngcontent-%COMP%]{font-weight:600}.song-count[_ngcontent-%COMP%]{opacity:.9}.playlist-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;z-index:2;position:relative}.play-all-btn[_ngcontent-%COMP%]{background:#1db954;color:#fff;border:none;padding:1rem 2rem;border-radius:50px;font-size:1rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.75rem;transition:all .3s ease;box-shadow:0 8px 24px #1db9544d}.play-all-btn[_ngcontent-%COMP%]:hover{background:#1ed760;transform:scale(1.05);box-shadow:0 12px 32px #1db95466}.play-all-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.shuffle-btn[_ngcontent-%COMP%], .more-options-btn[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.shuffle-btn[_ngcontent-%COMP%]:hover, .more-options-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.shuffle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .more-options-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}@media (max-width: 768px){.liked-songs-header[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center;padding:1.5rem;min-height:auto;gap:2rem}.playlist-info[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:1.5rem}.playlist-cover[_ngcontent-%COMP%]{width:150px;height:150px}.liked-songs-icon[_ngcontent-%COMP%]{font-size:3rem}.playlist-title[_ngcontent-%COMP%]{font-size:2.5rem}.playlist-actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap;gap:.75rem}.play-all-btn[_ngcontent-%COMP%]{padding:.8rem 1.5rem;font-size:.9rem}.shuffle-btn[_ngcontent-%COMP%], .more-options-btn[_ngcontent-%COMP%]{width:45px;height:45px}.shuffle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .more-options-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 480px){.liked-songs-header[_ngcontent-%COMP%]{padding:1rem;gap:1.5rem}.playlist-cover[_ngcontent-%COMP%]{width:120px;height:120px}.liked-songs-icon[_ngcontent-%COMP%]{font-size:2.5rem}.playlist-title[_ngcontent-%COMP%]{font-size:2rem;line-height:1.2}.playlist-description[_ngcontent-%COMP%]{font-size:1rem}.playlist-stats[_ngcontent-%COMP%]{font-size:.85rem;flex-wrap:wrap;justify-content:center}.playlist-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}.play-all-btn[_ngcontent-%COMP%]{padding:.75rem 1.25rem;font-size:.85rem;flex:1;max-width:200px}.shuffle-btn[_ngcontent-%COMP%], .more-options-btn[_ngcontent-%COMP%]{width:40px;height:40px}.shuffle-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .more-options-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 360px){.playlist-title[_ngcontent-%COMP%]{font-size:1.75rem}.playlist-cover[_ngcontent-%COMP%]{width:100px;height:100px}.liked-songs-icon[_ngcontent-%COMP%]{font-size:2rem}.play-all-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:.7rem 1rem}.shuffle-btn[_ngcontent-%COMP%], .more-options-btn[_ngcontent-%COMP%]{width:35px;height:35px}}']})};var Ie=[{path:"",component:O},{path:"liked-songs",component:k}],N=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=I({type:a});static \u0275inj=z({imports:[C.forChild(Ie),C]})};var Ce=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=I({type:a});static \u0275inj=z({imports:[y,N,ve,C,O,k]})};export{Ce as FavoritesModule};
