import{Ka as p,g as u,i as c,u as s,x as n}from"./chunk-7N4HMWCM.js";var o=class t{constructor(e){this.http=e}API_BASE_URL="http://localhost:5000";post(e,r){return this.http.post(`${this.API_BASE_URL}${e}`,r)}get(e){return this.http.get(`${this.API_BASE_URL}${e}`)}put(e,r){return this.http.put(`${this.API_BASE_URL}${e}`,r)}delete(e){return this.http.delete(`${this.API_BASE_URL}${e}`)}static \u0275fac=function(r){return new(r||t)(n(p))};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var a=class t{currentUserSubject=new u(null);currentUser$=this.currentUserSubject.asObservable();constructor(){try{let e=localStorage.getItem("currentUser");if(e&&e!=="undefined"&&e!=="null"){let r=JSON.parse(e);this.currentUserSubject.next(r)}}catch(e){console.warn("Error parsing user from localStorage:",e),localStorage.removeItem("currentUser")}}setCurrentUser(e){e?(localStorage.setItem("currentUser",JSON.stringify(e)),this.currentUserSubject.next(e)):(localStorage.removeItem("currentUser"),this.currentUserSubject.next(null))}getCurrentUser(){return this.currentUserSubject.value}isAuthenticated(){return!!this.currentUserSubject.value}logout(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var v=class t{constructor(e,r){this.apiService=e;this.userService=r}register(e,r){return this.apiService.post("/api/users",{email:e,password:r}).pipe(c(i=>(i.success&&this.userService.setCurrentUser(i.data),i)))}login(e,r){return this.apiService.post("/api/users/login",{email:e,password:r}).pipe(c(i=>(i.success&&this.userService.setCurrentUser(i.data),i)))}logout(){this.userService.logout()}isAuthenticated(){return this.userService.isAuthenticated()}getCurrentUser(){return this.userService.getCurrentUser()}verifyEmail(e){return this.apiService.post("/api/users/verify-email",{email:e})}resetPassword(e,r){return this.apiService.post("/api/users/reset-password",{email:e,newPassword:r})}static \u0275fac=function(r){return new(r||t)(n(o),n(a))};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};export{a,o as b,v as c};
